(this["webpackJsonpgoit-react-hw-09-phonebook"]=this["webpackJsonpgoit-react-hw-09-phonebook"]||[]).push([[2],{102:function(t,e,c){"use strict";c.r(e);var n,r,a,o,s,u,i=c(0),b=c.n(i),j=c(23),l=c.n(j),d=c(10),O=c(26),f=c(2),g=c(18),h=c(44),p=c.n(h),x=c(3),S=c(8),C=c(11),m=Object(f.c)([],(n={},Object(x.a)(n,C.a.fetchContactsSuccess,(function(t,e){return e.payload})),Object(x.a)(n,C.a.addContactSuccess,(function(t,e){return[].concat(Object(O.a)(t),[e.payload])})),Object(x.a)(n,C.a.deleteContactSuccess,(function(t,e){return t.filter((function(t){return t.id!==e.payload}))})),n)),v=Object(f.c)("",Object(x.a)({},C.a.changeFilter,(function(t,e){return e.payload}))),E=Object(f.c)(!1,(r={},Object(x.a)(r,C.a.fetchContactsRequest,(function(){return!0})),Object(x.a)(r,C.a.fetchContactsSuccess,(function(){return!1})),Object(x.a)(r,C.a.fetchContactsError,(function(){return!1})),Object(x.a)(r,C.a.addContactRequest,(function(){return!0})),Object(x.a)(r,C.a.addContactSuccess,(function(){return!1})),Object(x.a)(r,C.a.addContactError,(function(){return!1})),Object(x.a)(r,C.a.deleteContactRequest,(function(){return!0})),Object(x.a)(r,C.a.deleteContactSuccess,(function(){return!1})),Object(x.a)(r,C.a.deleteContactError,(function(){return!1})),r)),k=Object(S.b)({contacts:m,filter:v,loading:E}),R=c(4),y={name:null,email:null},q=Object(f.c)(y,(a={},Object(x.a)(a,R.a.registerSuccess,(function(t,e){return e.payload.user})),Object(x.a)(a,R.a.loginSuccess,(function(t,e){return e.payload.user})),Object(x.a)(a,R.a.logoutSuccess,(function(){return y})),Object(x.a)(a,R.a.currentUserSuccess,(function(t,e){return e.payload})),a)),_=Object(f.c)("",(o={},Object(x.a)(o,R.a.registerSuccess,(function(t,e){return e.payload.token})),Object(x.a)(o,R.a.loginSuccess,(function(t,e){return e.payload.token})),Object(x.a)(o,R.a.logoutSuccess,(function(){return null})),o)),U=Object(f.c)("",(s={},Object(x.a)(s,R.a.registerSuccess,(function(){return!0})),Object(x.a)(s,R.a.loginSuccess,(function(){return!0})),Object(x.a)(s,R.a.registerError,(function(){return!1})),Object(x.a)(s,R.a.loginError,(function(){return!1})),Object(x.a)(s,R.a.logoutSuccess,(function(){return!1})),Object(x.a)(s,R.a.currentUserError,(function(){return!1})),Object(x.a)(s,R.a.currentUserSuccess,(function(){return!0})),s)),w=Object(f.c)("",(u={},Object(x.a)(u,R.a.registerError,(function(t,e){return e.payload})),Object(x.a)(u,R.a.loginError,(function(t,e){return e.payload})),Object(x.a)(u,R.a.logoutError,(function(t,e){return e.payload})),Object(x.a)(u,R.a.currentUserError,(function(t,e){return e.payload})),u)),A=Object(S.b)({user:q,isLoggedIn:U,token:_,error:w}),T=Object(O.a)(Object(f.d)({serializableCheck:{ignoredActions:[g.a,g.f,g.b,g.c,g.d,g.e]}})),L={key:"loggedIn",storage:p.a,whitelist:["token"]},N=Object(f.a)({reducer:{userData:Object(g.g)(L,A),phonebook:k},middleware:T}),z={store:N,persistor:Object(g.h)(N)},F=c(45),I=c(16),D=(c(60),c(7)),J=c(34),M=c.n(J),B=(c(48),c(22)),G=function(t){return t.userData.isLoggedIn},H=function(t){return t.userData.user.email},K=c(29),P=c.n(K),Q=c(1);function V(){var t=Object(d.c)(G);return Object(Q.jsxs)("nav",{children:[Object(Q.jsx)(I.b,{to:"/",exact:!0,className:P.a.nav_link,children:"Home"}),t&&Object(Q.jsx)(I.b,{to:"/contacts",className:P.a.nav_link,children:"Contacts"})]})}var W=c(46),X=c.n(W);function Y(){var t=Object(d.c)(H),e=Object(d.b)();return Object(Q.jsxs)("div",{children:[Object(Q.jsx)("span",{children:t}),Object(Q.jsx)("button",{type:"button",className:X.a.logout,color:"inherit",onClick:function(){return e(B.a.userLogout())},children:"Logout"})]})}var Z=c(32),$=c.n(Z),tt=function(){return Object(Q.jsxs)("div",{children:[Object(Q.jsx)(I.b,{to:"/register",exact:!0,className:$.a.nav_link,children:"Register"}),Object(Q.jsx)(I.b,{to:"/login",className:$.a.nav_link,children:"Login"})]})},et=c(47),ct=c.n(et);function nt(){var t=Object(d.c)(G);return Object(Q.jsxs)("header",{className:ct.a.header,children:[Object(Q.jsx)(V,{}),t?Object(Q.jsx)(Y,{}):Object(Q.jsx)(tt,{})]})}var rt=c(17),at=c(25);function ot(t){t.isAuthenticated;var e=t.redirectTo,c=t.children,n=Object(at.a)(t,["isAuthenticated","redirectTo","children"]),r=Object(d.c)(G);return Object(Q.jsx)(D.b,Object(rt.a)(Object(rt.a)({},n),{},{children:r?c:Object(Q.jsx)(D.a,{to:e})}))}function st(t){t.isAuthenticated;var e=t.redirectTo,c=t.children,n=Object(at.a)(t,["isAuthenticated","redirectTo","children"]),r=Object(d.c)(G);return Object(Q.jsx)(D.b,Object(rt.a)(Object(rt.a)({},n),{},{children:r&&n.restricted?Object(Q.jsx)(D.a,{to:e}):c}))}var ut=Object(i.lazy)((function(){return c.e(0).then(c.bind(null,110))})),it=Object(i.lazy)((function(){return c.e(3).then(c.bind(null,113))})),bt=Object(i.lazy)((function(){return c.e(4).then(c.bind(null,111))})),jt=Object(i.lazy)((function(){return c.e(1).then(c.bind(null,112))}));function lt(){var t=Object(d.b)();return Object(i.useEffect)((function(){t(B.a.getCurrentUser())}),[t]),Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(nt,{}),Object(Q.jsx)(i.Suspense,{fallback:Object(Q.jsx)(M.a,{type:"TailSpin",color:"teal",height:130,width:130,style:{textAlign:"center"}}),children:Object(Q.jsxs)(D.d,{children:[Object(Q.jsx)(st,{path:"/",exact:!0,component:ut}),Object(Q.jsx)(st,{path:"/register",restricted:!0,redirectTo:"/contacts",component:bt}),Object(Q.jsx)(st,{path:"/login",restricted:!0,redirectTo:"/contacts",component:jt}),Object(Q.jsx)(ot,{path:"/contacts",redirectTo:"/login",component:it})]})})]})}l.a.render(Object(Q.jsx)(b.a.StrictMode,{children:Object(Q.jsx)(d.a,{store:z.store,children:Object(Q.jsx)(F.a,{loading:null,persistor:z.persistor,children:Object(Q.jsx)(I.a,{children:Object(Q.jsx)(lt,{})})})})}),document.getElementById("root"))},11:function(t,e,c){"use strict";var n=c(2),r=Object(n.b)("contacts/fetchContactsRequest"),a=Object(n.b)("contacts/fetchContactsSuccess"),o=Object(n.b)("contacts/fetchContactsError"),s=Object(n.b)("contacts/addContactRequest"),u=Object(n.b)("contacts/addContactSuccess"),i=Object(n.b)("contacts/addContactError"),b=Object(n.b)("contacts/deleteContactRequest"),j=Object(n.b)("contacts/deleteContactSuccess"),l=Object(n.b)("contacts/deleteContactError"),d=Object(n.b)("contacts/changeFilter");e.a={fetchContactsRequest:r,fetchContactsSuccess:a,fetchContactsError:o,addContactRequest:s,addContactSuccess:u,addContactError:i,deleteContactRequest:b,deleteContactSuccess:j,deleteContactError:l,changeFilter:d}},22:function(t,e,c){"use strict";var n=c(19),r=c.n(n),a=c(4);r.a.defaults.baseURL="https://connections-api.herokuapp.com";var o=function(t){r.a.defaults.headers.common.Authorization="Bearer ".concat(t)},s=function(){r.a.defaults.headers.common.Authorization=""};e.a={userRegister:function(t){return function(e){var c={name:t.name,email:t.email,password:t.password};e(a.a.registerRequest()),r.a.post("/users/signup",c).then((function(t){var c=t.data;o(c.token),e(a.a.registerSuccess(c))})).catch((function(t){e(a.a.registerError(t.message))}))}},userLogin:function(t){return function(e){var c={email:t.email,password:t.password};e(a.a.loginRequest()),r.a.post("/users/login",c).then((function(t){var c=t.data;o(c.token),e(a.a.loginSuccess(c))})).catch((function(t){return e(a.a.registerError(t.message))}))}},userLogout:function(){return function(t){t(a.a.logoutRequest()),r.a.post("/users/logout").then((function(){s(),t(a.a.logoutSuccess())})).catch((function(e){return t(a.a.logoutError(e.message))}))}},getCurrentUser:function(){return function(t,e){var c=e().userData.token;c&&(o(c),t(a.a.currentUserRequest()),r.a.get("/users/current").then((function(e){var c=e.data;return t(a.a.currentUserSuccess(c))})).catch((function(e){return t(a.a.currentUserError(e.message))})))}}}},29:function(t,e,c){t.exports={nav_link:"Navigation_nav_link__3CFeK"}},32:function(t,e,c){t.exports={nav_link:"AuthMenu_nav_link__1Fo8o"}},4:function(t,e,c){"use strict";var n=c(2),r=Object(n.b)("contacts/loginRequest"),a=Object(n.b)("contacts/loginSuccess"),o=Object(n.b)("contacts/loginError"),s=Object(n.b)("contacts/registerRequest"),u=Object(n.b)("contacts/registerSuccess"),i=Object(n.b)("contacts/registerError"),b=Object(n.b)("contacts/logoutRequest"),j=Object(n.b)("contacts/logoutSuccess"),l=Object(n.b)("contacts/logoutError"),d=Object(n.b)("contacts/currentUserRequest"),O=Object(n.b)("contacts/currentUserSuccess"),f=Object(n.b)("contacts/currentUserError");e.a={loginRequest:r,loginSuccess:a,loginError:o,logoutError:l,logoutRequest:b,logoutSuccess:j,registerError:i,registerRequest:s,registerSuccess:u,currentUserError:f,currentUserRequest:d,currentUserSuccess:O}},46:function(t,e,c){t.exports={logout:"UserMenu_logout__GhtTm"}},47:function(t,e,c){t.exports={header:"AppNav_header__3JIyd"}},60:function(t,e,c){}},[[102,5,6]]]);
//# sourceMappingURL=main.1d55360b.chunk.js.map